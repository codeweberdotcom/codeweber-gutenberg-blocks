/**
 * Accordion Block - Editor Styles
 *
 * @package CodeWeber Gutenberg Blocks
 * 
 * NOTE: These styles are ONLY for the Gutenberg editor visualization.
 * Frontend styles are handled by theme's _accordion.scss
 */

.wp-block-codeweber-blocks-accordion {
	.accordion-wrapper {
		.accordion-item-wrapper {
			// Visual borders for editor only
			border: 1px solid #ddd;
			border-radius: 0.25rem;
			margin-bottom: 0.5rem;
			position: relative;

			&:last-child {
				margin-bottom: 0;
			}

			// Make controls visible when wrapper is hovered
			&:hover .accordion-item-controls {
				opacity: 1 !important;
				visibility: visible !important;
				pointer-events: auto;
			}

			.card-header {
				.accordion-button {
					// Basic editor visualization
					width: 100%;
					text-align: left;
					cursor: pointer;
					display: flex;
					align-items: center;
					gap: 0.5rem;

					// Focus state for editor accessibility
					&:focus {
						outline: 1px solid #0073aa;
						outline-offset: -1px;
					}

					// Simple arrow indicator for editor (theme handles real icons)
					&::after {
						margin-left: auto;
						content: '';
						width: 0;
						height: 0;
						border-left: 5px solid transparent;
						border-right: 5px solid transparent;
						border-top: 5px solid currentColor;
						transition: transform 0.3s ease;
					}

					&:not(.collapsed)::after {
						transform: rotate(180deg);
					}
				}
			}

			// Item Controls - Absolute positioned, visible on hover
			.accordion-item-controls {
				position: absolute;
				right: 10px;
				top: -18px;
				display: flex;
				gap: 4px;
				z-index: 10;
				opacity: 0 !important;
				visibility: hidden !important;
				transition: opacity 0.2s ease, visibility 0.2s ease;
				background: #fff;
				padding: 4px;
				border-radius: 4px;
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
				pointer-events: none;

				button {
					display: flex;
					align-items: center;
					justify-content: center;
					width: 28px;
					height: 28px;
					padding: 0;
					margin: 0;
					cursor: pointer;
					border: 1px solid #ddd;
					background: #fff;
					border-radius: 2px;
					transition: background-color 0.2s ease;

					&:hover:not(:disabled) {
						background-color: rgba(0, 0, 0, 0.05);
					}

					&:disabled {
						opacity: 0.4;
						cursor: not-allowed;
					}

					&.is-destructive:hover:not(:disabled) {
						background-color: rgba(220, 50, 47, 0.1);
						border-color: #dc322f;
					}
				}
			}

		}

		.accordion-item {
			// Remove borders from inner item (handled by wrapper)
			border: none;
			border-radius: 0;
			margin-bottom: 0;
			width: 100% !important;
			max-width: 100% !important;
		}

		.accordion-collapse {
			&:not(.show) {
				display: none;
			}
		}

		.card-body {
			// Visual separator for editor
			border-top: 1px solid #ddd;
		}

		// Simple style (plain) - editor visualization
		&.plain .accordion-item {
			border: none;

			.card-header .accordion-button {
				border-bottom: 1px solid rgba(0, 0, 0, 0.1);
			}
		}

		// Background style - editor visualization
		&:not(.plain) .accordion-item {
			.card-header .accordion-button {
				background-color: rgba(0, 0, 0, 0.03);
				border-radius: 0.25rem 0.25rem 0 0;

				&:not(.collapsed) {
					background-color: rgba(0, 0, 0, 0.05);
				}
			}
		}

		// Icon style - editor visualization
		&.icon .accordion-item {
			.card-header .accordion-button {
				span {
					margin-right: 0.5rem;

					i {
						font-size: 1.25rem;
					}
				}
			}
		}
	}
}
