(()=>{"use strict";var e,t={593:(e,t,l)=>{const r=window.wp.blocks,o=window.React,a=window.wp.blockEditor,c=window.wp.components,s=window.wp.i18n,n=window.wp.element,b=({attributes:e,setAttributes:t,fieldKeys:l={classKey:"sectionClass",dataKey:"sectionData",idKey:"sectionId"},labels:r={classLabel:(0,s.__)("Block Class","codeweber-gutenberg-blocks"),dataLabel:(0,s.__)("Block Data","codeweber-gutenberg-blocks"),idLabel:(0,s.__)("Block ID","codeweber-gutenberg-blocks")},placeholders:a={classPlaceholder:(0,s.__)("custom-wrapper classes","codeweber-gutenberg-blocks"),dataPlaceholder:(0,s.__)("key=value,key2=value2","codeweber-gutenberg-blocks"),idPlaceholder:(0,s.__)("custom-id","codeweber-gutenberg-blocks")}})=>{const n=(e,r)=>{let o=r;e===l.idKey&&(o=((e="")=>e.replace(/^#/,"").trim())(r)),t({[e]:o})};return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(c.TextControl,{label:r.classLabel,value:e[l.classKey]||"",placeholder:a.classPlaceholder,onChange:e=>n(l.classKey,e)}),(0,o.createElement)(c.TextControl,{label:r.dataLabel,value:e[l.dataKey]||"",placeholder:a.dataPlaceholder,help:(0,s.__)("Comma separated pairs: key=value,key2=value2","codeweber-gutenberg-blocks"),onChange:e=>n(l.dataKey,e)}),(0,o.createElement)(c.TextControl,{label:r.idLabel,value:e[l.idKey]||"",placeholder:a.idPlaceholder,onChange:e=>n(l.idKey,e)}))},d=window.wp.apiFetch;var i=l.n(d);const u=JSON.parse('{"apiVersion":2,"name":"codeweber-blocks/html-blocks","version":"0.1.0","title":"Html Blocks","category":"codeweber-gutenberg-blocks","icon":"code","description":"Выберите и отобразите HTML блок из CPT html_blocks","keywords":["html","blocks","cpt"],"supports":{"html":false,"customClassName":true,"anchor":true},"attributes":{"selectedBlockId":{"type":"number","default":0},"blockClass":{"type":"string","default":""},"blockData":{"type":"string","default":""},"blockId":{"type":"string","default":""}},"textdomain":"codeweber-gutenberg-blocks","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}');(0,r.registerBlockType)(u,{edit:({attributes:e,setAttributes:t,clientId:l})=>{const{selectedBlockId:r,blockClass:d,blockData:u,blockId:g}=e,[p,k]=(0,n.useState)([]),[w,m]=(0,n.useState)(!0),[_,h]=(0,n.useState)(""),[y,v]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{m(!0);try{const e=await i()({path:"/wp/v2/html_blocks?per_page=100&status=publish"}),t=[{label:(0,s.__)("-- Выберите блок --","codeweber-gutenberg-blocks"),value:0},...e.map(e=>({label:e.title?.rendered||`#${e.id}`,value:e.id}))];k(t)}catch(e){console.error("Error fetching HTML blocks:",e),k([{label:(0,s.__)("-- Выберите блок --","codeweber-gutenberg-blocks"),value:0}])}finally{m(!1)}})()},[]),(0,n.useEffect)(()=>{r&&0!==r?(async()=>{v(!0);try{const e=await i()({path:`/wp/v2/html_blocks/${r}`}),t=e.content?.rendered||"";h(t)}catch(e){console.error("Error fetching block content:",e),h((0,s.__)("Ошибка загрузки контента","codeweber-gutenberg-blocks"))}finally{v(!1)}})():h("")},[r]);const f=(0,a.useBlockProps)({className:`codeweber-html-blocks ${d||""}`.trim(),...g&&{id:g}});return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(a.InspectorControls,null,(0,o.createElement)(c.PanelBody,{title:(0,s.__)("Настройки HTML блока","codeweber-gutenberg-blocks"),initialOpen:!0},w?(0,o.createElement)("div",{style:{padding:"10px",textAlign:"center"}},(0,o.createElement)(c.Spinner,null),(0,o.createElement)("p",null,(0,s.__)("Загрузка блоков...","codeweber-gutenberg-blocks"))):(0,o.createElement)(c.SelectControl,{label:(0,s.__)("Выберите HTML блок","codeweber-gutenberg-blocks"),value:r||0,options:p,onChange:e=>t({selectedBlockId:parseInt(e)||0}),help:(0,s.__)("Выберите блок из CPT html_blocks для отображения","codeweber-gutenberg-blocks")})),(0,o.createElement)(c.PanelBody,{title:(0,s.__)("Дополнительные настройки","codeweber-gutenberg-blocks")},(0,o.createElement)(b,{attributes:e,setAttributes:t,fieldKeys:{classKey:"blockClass",dataKey:"blockData",idKey:"blockId"},labels:{classLabel:(0,s.__)("CSS класс","codeweber-gutenberg-blocks"),dataLabel:(0,s.__)("Data атрибуты","codeweber-gutenberg-blocks"),idLabel:(0,s.__)("ID элемента","codeweber-gutenberg-blocks")}}))),(0,o.createElement)("div",{...f,...(()=>{const e={};return u&&u.split(",").forEach(t=>{const[l,r]=t.split("=").map(e=>e.trim());l&&r&&(e[`data-${l}`]=r)}),e})()},r&&0!==r?y?(0,o.createElement)("div",{style:{padding:"20px",textAlign:"center"}},(0,o.createElement)(c.Spinner,null),(0,o.createElement)("p",null,(0,s.__)("Загрузка контента...","codeweber-gutenberg-blocks"))):(0,o.createElement)("div",{className:"html-blocks-content",dangerouslySetInnerHTML:{__html:_}}):(0,o.createElement)(c.Placeholder,{icon:"code",label:(0,s.__)("Html Blocks","codeweber-gutenberg-blocks"),instructions:(0,s.__)("Выберите HTML блок из списка в настройках","codeweber-gutenberg-blocks")})))},save:()=>null})}},l={};function r(e){var o=l[e];if(void 0!==o)return o.exports;var a=l[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,l,o,a)=>{if(!l){var c=1/0;for(d=0;d<e.length;d++){for(var[l,o,a]=e[d],s=!0,n=0;n<l.length;n++)(!1&a||c>=a)&&Object.keys(r.O).every(e=>r.O[e](l[n]))?l.splice(n--,1):(s=!1,a<c&&(c=a));if(s){e.splice(d--,1);var b=o();void 0!==b&&(t=b)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[l,o,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var l in t)r.o(t,l)&&!r.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={663:0,711:0};r.O.j=t=>0===e[t];var t=(t,l)=>{var o,a,[c,s,n]=l,b=0;if(c.some(t=>0!==e[t])){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(n)var d=n(r)}for(t&&t(l);b<c.length;b++)a=c[b],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},l=globalThis.webpackChunkcodeweber_gutenberg_blocks=globalThis.webpackChunkcodeweber_gutenberg_blocks||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var o=r.O(void 0,[711],()=>r(593));o=r.O(o)})();