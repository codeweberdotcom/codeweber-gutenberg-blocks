(()=>{"use strict";var e,o={59:(e,o,t)=>{const l=window.React,a=window.wp.blocks,r=window.wp.i18n,n=JSON.parse('{"apiVersion":3,"name":"codeweber-blocks/search","version":"0.1.0","title":"Search","category":"codeweber-gutenberg-elements","icon":"search","description":"AJAX search form. Display as inline form or dropdown (no trigger button). Markup only, no shortcode.","keywords":["search","dropdown","form","ajax"],"supports":{"html":false,"customClassName":true,"anchor":true},"attributes":{"blockClass":{"type":"string","default":""},"blockId":{"type":"string","default":""},"displayType":{"type":"string","default":"form","enum":["form","inline","dropdown"]},"dropdownMinWidth":{"type":"string","default":"320"},"placeholder":{"type":"string","default":""},"postsPerPage":{"type":"string","default":"8"},"postTypes":{"type":"string","default":"post"},"searchContent":{"type":"string","default":"false"},"showExcerpt":{"type":"string","default":"false"},"taxonomy":{"type":"string","default":""},"term":{"type":"string","default":""},"includeTaxonomies":{"type":"string","default":"false"},"formId":{"type":"string","default":""},"formClass":{"type":"string","default":""}},"textdomain":"codeweber-blocks","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","render":"file:./render.php"}'),s=window.wp.blockEditor,c=window.wp.components,d=window.wp.element,i=window.wp.apiFetch;var p=t.n(i);const b=["attachment","wp_block","wp_template","wp_template_part","wp_navigation","nav_menu_item","wp_global_styles","wp_font_family","wp_font_face","html_blocks","modal","header","footer","page-header","codeweber_form","cw_image_hotspot"],m=["элементы меню","меню навигации","глобальные стили","семейства шрифтов","гарнитуры шрифта","хедер","футер","заголовки","page header","page headers","модальные окна","modal","html блоки","html blocks","rm content editor","content editor","формы","forms","image hotspot","image hotspots","hotspot","hotspots"],w=({attributes:e,setAttributes:o})=>{const{blockClass:t,blockId:a,displayType:n,dropdownMinWidth:s,placeholder:i,postsPerPage:w,postTypes:u,searchContent:h,showExcerpt:_,taxonomy:g,term:f,includeTaxonomies:y,formId:k,formClass:v}=e,[C,x]=(0,d.useState)([]),[E,T]=(0,d.useState)(!0);return(0,d.useEffect)(()=>{if(void 0!==window.cwgbSearchPostTypes&&window.cwgbSearchPostTypes.postTypes?.length)return x(window.cwgbSearchPostTypes.postTypes),void T(!1);(async()=>{try{const e=await p()({path:"/wp/v2/types"}),o=Object.keys(e).filter(o=>{if(b.includes(o))return!1;const t=(e[o].name||"").toLowerCase();return!m.some(e=>t.includes(e.toLowerCase()))}).map(o=>({label:e[o].name||o,value:o}));x(o.length?o:[{label:"Post",value:"post"}])}catch(e){x([{label:"Post",value:"post"}])}T(!1)})()},[]),(0,l.createElement)(l.Fragment,null,(0,l.createElement)(c.PanelBody,{title:(0,r.__)("Block Settings","codeweber-blocks"),initialOpen:!0},(0,l.createElement)(c.TextControl,{label:(0,r.__)("Block Class","codeweber-blocks"),value:t||"",onChange:e=>o({blockClass:e})}),(0,l.createElement)(c.TextControl,{label:(0,r.__)("Block ID","codeweber-blocks"),value:a||"",onChange:e=>o({blockId:(e||"").replace(/^#/,"").trim()})})),(0,l.createElement)(c.PanelBody,{title:(0,r.__)("Search form","codeweber-blocks"),initialOpen:!0},(0,l.createElement)(c.SelectControl,{label:(0,r.__)("Display type","codeweber-blocks"),value:n||"form",options:[{value:"form",label:(0,r.__)("Form (inline)","codeweber-blocks")},{value:"inline",label:(0,r.__)("Inline","codeweber-blocks")},{value:"dropdown",label:(0,r.__)("Dropdown (no button)","codeweber-blocks")}],onChange:e=>o({displayType:e})}),"dropdown"===n&&(0,l.createElement)(c.TextControl,{label:(0,r.__)("Dropdown min width","codeweber-blocks"),value:null!=s?s:"320",help:(0,r.__)("e.g. 320, 320px, 20rem. Default: 320px","codeweber-blocks"),onChange:e=>o({dropdownMinWidth:e||"320"})}),(0,l.createElement)(c.TextControl,{label:(0,r.__)("Placeholder","codeweber-blocks"),value:i||"",help:(0,r.__)("Leave empty to use “Type keyword” (translatable in Loco).","codeweber-blocks"),onChange:e=>o({placeholder:e})}),(0,l.createElement)(c.TextControl,{label:(0,r.__)("Posts per page","codeweber-blocks"),value:w||"8",onChange:e=>o({postsPerPage:e})}),(0,l.createElement)(c.SelectControl,{label:(0,r.__)("Post types","codeweber-blocks"),value:u||"post",options:E?[{label:(0,r.__)("Loading…","codeweber-blocks"),value:""}]:C,onChange:e=>o({postTypes:e||"post"}),help:(0,r.__)("Post type to search in (theme and active theme CPT).","codeweber-blocks")}),(0,l.createElement)(c.SelectControl,{label:(0,r.__)("Search content","codeweber-blocks"),value:h||"false",options:[{value:"false",label:(0,r.__)("No","codeweber-blocks")},{value:"true",label:(0,r.__)("Yes","codeweber-blocks")}],onChange:e=>o({searchContent:e})}),(0,l.createElement)(c.SelectControl,{label:(0,r.__)("Show excerpt","codeweber-blocks"),value:_||"false",options:[{value:"false",label:(0,r.__)("No","codeweber-blocks")},{value:"true",label:(0,r.__)("Yes","codeweber-blocks")}],onChange:e=>o({showExcerpt:e})}),(0,l.createElement)(c.TextControl,{label:(0,r.__)("Taxonomy","codeweber-blocks"),value:g||"",help:(0,r.__)("e.g. category, post_tag","codeweber-blocks"),onChange:e=>o({taxonomy:e})}),(0,l.createElement)(c.TextControl,{label:(0,r.__)("Term slug","codeweber-blocks"),value:f||"",onChange:e=>o({term:e})}),(0,l.createElement)(c.SelectControl,{label:(0,r.__)("Include taxonomies","codeweber-blocks"),value:y||"false",options:[{value:"false",label:(0,r.__)("No","codeweber-blocks")},{value:"true",label:(0,r.__)("Yes","codeweber-blocks")}],onChange:e=>o({includeTaxonomies:e})}),(0,l.createElement)(c.TextControl,{label:(0,r.__)("Form ID","codeweber-blocks"),value:k||"",help:(0,r.__)("Leave empty for auto","codeweber-blocks"),onChange:e=>o({formId:e})}),(0,l.createElement)(c.TextControl,{label:(0,r.__)("Form wrapper class","codeweber-blocks"),value:v||"",onChange:e=>o({formClass:e})})))},u=(0,l.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor"},(0,l.createElement)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}));(0,a.registerBlockType)(n.name,{...n,icon:u,edit:({attributes:e,setAttributes:o})=>{const{blockClass:t,blockId:a,displayType:n,dropdownMinWidth:c,placeholder:d,postsPerPage:i,postTypes:p,searchContent:b,showExcerpt:m,taxonomy:u,term:h,includeTaxonomies:_,formId:g,formClass:f}=e,y=["cwgb-search-block","dropdown"===n&&"dropdown","inline"===n&&"inline",t].filter(Boolean).join(" "),k=(0,s.useBlockProps)({className:y,id:a||void 0}),v=(0,l.createElement)("div",{className:"position-relative "+(f||"")},(0,l.createElement)("form",{className:"search-form",id:g||"search-form-preview",role:"search"},(0,l.createElement)("input",{type:"text",className:"search-form form-control",placeholder:d||(0,r.__)("Type keyword","codeweber-gutenberg-blocks"),disabled:!0,"data-posts-per-page":i,"data-post-types":p,"data-search-content":b,"data-taxonomy":u,"data-term":h,"data-include-taxonomies":_,"data-show-excerpt":m})));return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(s.InspectorControls,null,(0,l.createElement)(w,{attributes:e,setAttributes:o})),(0,l.createElement)("div",{...k},"dropdown"===n?(0,l.createElement)(l.Fragment,null,(0,l.createElement)("a",{className:"dropdown-toggle",href:"#",role:"button",onClick:e=>e.preventDefault(),"aria-expanded":"false","aria-label":(0,r.__)("Search","codeweber-blocks")},(0,l.createElement)("i",{className:"uil uil-search"})),(0,l.createElement)("div",{className:"dropdown-menu dropdown-menu-end p-0",style:{minWidth:(c&&/^\d+$/.test(String(c))?c+"px":c)||"320px"}},v)):v))},save:()=>null})}},t={};function l(e){var a=t[e];if(void 0!==a)return a.exports;var r=t[e]={exports:{}};return o[e](r,r.exports,l),r.exports}l.m=o,e=[],l.O=(o,t,a,r)=>{if(!t){var n=1/0;for(i=0;i<e.length;i++){for(var[t,a,r]=e[i],s=!0,c=0;c<t.length;c++)(!1&r||n>=r)&&Object.keys(l.O).every(e=>l.O[e](t[c]))?t.splice(c--,1):(s=!1,r<n&&(n=r));if(s){e.splice(i--,1);var d=a();void 0!==d&&(o=d)}}return o}r=r||0;for(var i=e.length;i>0&&e[i-1][2]>r;i--)e[i]=e[i-1];e[i]=[t,a,r]},l.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return l.d(o,{a:o}),o},l.d=(e,o)=>{for(var t in o)l.o(o,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},l.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{var e={6737:0,4949:0};l.O.j=o=>0===e[o];var o=(o,t)=>{var a,r,[n,s,c]=t,d=0;if(n.some(o=>0!==e[o])){for(a in s)l.o(s,a)&&(l.m[a]=s[a]);if(c)var i=c(l)}for(o&&o(t);d<n.length;d++)r=n[d],l.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return l.O(i)},t=globalThis.webpackChunkcodeweber_gutenberg_blocks=globalThis.webpackChunkcodeweber_gutenberg_blocks||[];t.forEach(o.bind(null,0)),t.push=o.bind(null,t.push.bind(t))})();var a=l.O(void 0,[4949],()=>l(59));a=l.O(a)})();