(()=>{"use strict";var e,t={528:(e,t,l)=>{const o=window.wp.blocks,r=window.React,a=window.wp.blockEditor,i=window.wp.element,n=window.wp.components,c=window.wp.i18n,s=(0,i.forwardRef)(function({icon:e,size:t=24,...l},o){return(0,i.cloneElement)(e,{width:t,height:t,...l,ref:o})}),d=window.wp.primitives,u=(0,r.createElement)(d.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)(d.Path,{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM5 4.5h14c.3 0 .5.2.5.5v8.4l-3-2.9c-.3-.3-.8-.3-1 0L11.9 14 9 12c-.3-.2-.6-.2-.8 0l-3.6 2.6V5c-.1-.3.1-.5.4-.5zm14 15H5c-.3 0-.5-.2-.5-.5v-2.4l4.1-3 3 1.9c.3.2.7.2.9-.1L16 12l3.5 3.4V19c0 .3-.2.5-.5.5z"})),b=(0,r.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(d.Path,{d:"M11.776 4.454a.25.25 0 01.448 0l2.069 4.192a.25.25 0 00.188.137l4.626.672a.25.25 0 01.139.426l-3.348 3.263a.25.25 0 00-.072.222l.79 4.607a.25.25 0 01-.362.263l-4.138-2.175a.25.25 0 00-.232 0l-4.138 2.175a.25.25 0 01-.363-.263l.79-4.607a.25.25 0 00-.071-.222L4.754 9.881a.25.25 0 01.139-.426l4.626-.672a.25.25 0 00.188-.137l2.069-4.192z"})),m=(0,r.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(d.Path,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"})),g=window.wp.apiFetch;var p=l.n(g);const h=({value:e,onChange:t,label:l,help:o,customSizes:a,availableSizes:s=null,includeFull:d=!0,sort:u=!0,showLoading:b=!1,postType:m=null})=>{const{sizes:g,loading:h}=((e={})=>{const{includeFull:t=!0,sort:l=!0,postType:o=null,fallbackSizes:r=[{value:"thumbnail",label:"Thumbnail (150x150)",width:150,height:150},{value:"medium",label:"Medium (300x300)",width:300,height:300},{value:"large",label:"Large (1024x1024)",width:1024,height:1024},{value:"full",label:"Full Size",width:null,height:null}]}=e,[a,n]=(0,i.useState)([]),[c,s]=(0,i.useState)(!0),[d,u]=(0,i.useState)(null);return(0,i.useEffect)(()=>{s(!0),u(null);let e="/codeweber-gutenberg-blocks/v1/image-sizes";o&&(e+=`?post_type=${encodeURIComponent(o)}`),p()({path:e,method:"GET"}).then(e=>{let o=e.map(e=>({value:e.value,label:e.label,width:e.width,height:e.height,crop:e.crop}));t&&!o.find(e=>"full"===e.value)&&o.push({value:"full",label:"Full Size",width:null,height:null,crop:!1}),l&&o.sort((e,t)=>e.label.localeCompare(t.label)),n(o),s(!1)}).catch(e=>{console.error("Failed to fetch image sizes:",e),u(e),n(r),s(!1)})},[o,t,l]),{sizes:a,loading:c,error:d}})({includeFull:d,sort:u,postType:m});let v=a||g;s&&s.length>0&&(v=v.filter(e=>s.includes(e.value)));const y=v.map(e=>({value:e.value,label:e.label}));return 0===y.length&&y.push({value:"",label:(0,c.__)("Loading...","codeweber-gutenberg-blocks")}),(0,r.createElement)(n.SelectControl,{label:l||(0,c.__)("Image Size","codeweber-gutenberg-blocks"),value:e,options:y,onChange:t,help:o||(b&&h?(0,c.__)("Loading sizes...","codeweber-gutenberg-blocks"):void 0),disabled:h&&b})},v=({attributes:e,setAttributes:t})=>{const{enableLightbox:l,lightboxGallery:o}=e;return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(n.ToggleControl,{label:(0,c.__)("Enable Lightbox","codeweber-gutenberg-blocks"),checked:l,onChange:e=>t({enableLightbox:e})}),l&&(0,r.createElement)(n.TextControl,{label:(0,c.__)("Gallery Name","codeweber-gutenberg-blocks"),value:o,onChange:e=>t({lightboxGallery:e})}))},y=(e,t=!0,l=!1)=>{let o="",r="",a="";if(!e)return{url:"",oid:"",id:""};if(e.includes("<iframe")&&e.includes("vkvideo.ru")){const t=e.match(/src="([^"]*vkvideo\.ru[^"]*)"/);t&&(o=t[1],o.startsWith("//")&&(o=`https:${o}`))}else if(e.includes("vkvideo.ru")||e.includes("vk.com/video"))try{o=e.startsWith("http")?e:`https://${e}`}catch(e){console.warn("Invalid VK video URL format")}if(o)try{const e=new URL(o);if(r=e.searchParams.get("oid"),a=e.searchParams.get("id"),!r||!a){const t=e.pathname.match(/video(-?\d+)_(\d+)/);t&&(r=t[1],a=t[2])}if(r&&a){const i=new URL("https://vkvideo.ru/video_ext.php");i.searchParams.set("oid",r),i.searchParams.set("id",a),t&&(i.searchParams.set("hd","2"),e.searchParams.has("hash")?i.searchParams.set("hash",e.searchParams.get("hash")):i.searchParams.set("hash","0f00c4ecd2885c04"),l&&(i.searchParams.set("autoplay","1"),i.searchParams.set("allowFullscreen","true"),i.searchParams.set("fullscreen","true"))),o=i.toString()}}catch(e){console.error("Failed to parse VK URL:",e)}return{url:o,oid:r,id:a}},f=(e,t=!0)=>{let l="",o="";if(!e)return{url:"",videoId:""};if(e.includes("<iframe")&&e.includes("rutube.ru")){const t=e.match(/src="([^"]*rutube\.ru[^"]*)"/);t&&(l=t[1],l.startsWith("//")&&(l=`https:${l}`))}else if(e.includes("rutube.ru"))l=e.startsWith("http")?e:`https://${e}`;else if(e.match(/^[a-f0-9]{32}$/))return o=e,l=`https://rutube.ru/play/embed/${o}`,t&&(l+="?autoplay=1"),{url:l,videoId:o};if(l)try{const e=new URL(l);let r=e.pathname.match(/\/embed\/([a-f0-9]{32})/);if(r||(r=e.pathname.match(/\/video\/([a-f0-9]{32})/)),r){o=r[1];const e=new URL(`https://rutube.ru/play/embed/${o}`);t&&e.searchParams.set("autoplay","1"),l=e.toString()}}catch(e){console.warn("Invalid Rutube URL format")}return{url:l,videoId:o}},w=({videoType:e,value:t="",onChange:l,autoloadPoster:o=!1,onPosterLoad:a=null,multiline:s=!1,enhanceQuality:d=!0,forLightbox:u=!1})=>{const[b,m]=(0,i.useState)(!1),g=(()=>{switch(e){case"vk":return{label:(0,c.__)("VK Video URL or iframe","codeweber-gutenberg-blocks"),help:(0,c.__)("Paste VK video embed URL or full iframe code - URL will be extracted automatically","codeweber-gutenberg-blocks"),placeholder:"https://vkvideo.ru/video_ext.php?oid=...&id=... or paste iframe"};case"rutube":return{label:(0,c.__)("Rutube Video URL or ID","codeweber-gutenberg-blocks"),help:(0,c.__)("Paste Rutube embed URL, video ID, or full iframe code - URL will be extracted automatically","codeweber-gutenberg-blocks"),placeholder:"https://rutube.ru/play/embed/... or paste iframe or 32-char ID"};case"youtube":return{label:(0,c.__)("YouTube Video URL or ID","codeweber-gutenberg-blocks"),help:(0,c.__)("Enter YouTube video URL or video ID","codeweber-gutenberg-blocks"),placeholder:"https://youtube.com/watch?v=... or video ID"};case"vimeo":return{label:(0,c.__)("Vimeo Video ID","codeweber-gutenberg-blocks"),help:(0,c.__)("Enter Vimeo video ID","codeweber-gutenberg-blocks"),placeholder:"123456789"};default:return{label:(0,c.__)("Video URL","codeweber-gutenberg-blocks"),help:"",placeholder:""}}})(),p=s?n.TextareaControl:n.TextControl,h=s?{rows:3}:{};return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(p,{label:g.label,value:t,onChange:async t=>{let r={};switch(e){case"vk":r=y(t,d,u);break;case"rutube":r=f(t,d);break;case"youtube":r=(e=>{let t="";if(!e)return{url:"",videoId:""};try{if(e.includes("youtube.com")||e.includes("youtu.be")){const l=new URL(e.startsWith("http")?e:`https://${e}`);l.hostname.includes("youtube.com")?t=l.searchParams.get("v")||"":l.hostname.includes("youtu.be")&&(t=l.pathname.slice(1))}else e.match(/^[a-zA-Z0-9_-]{11}$/)&&(t=e)}catch(e){console.warn("Invalid YouTube URL format")}return{url:e,videoId:t}})(t);break;case"vimeo":r=(e=>{let t="";if(!e)return{url:"",videoId:""};try{if(e.includes("vimeo.com")){const l=new URL(e.startsWith("http")?e:`https://${e}`).pathname.match(/\/(\d+)/);l&&(t=l[1])}else e.match(/^\d+$/)&&(t=e)}catch(e){console.warn("Invalid Vimeo URL format")}return{url:e,videoId:t}})(t);break;default:r={url:t}}if(l(r.url||t,r),o&&a&&("vk"===e||"rutube"===e))if("vk"===e&&r.oid&&r.id){m(!0);try{const e=await wp.apiFetch({path:`/codeweber-gutenberg-blocks/v1/vk-thumbnail?oid=${encodeURIComponent(r.oid)}&id=${encodeURIComponent(r.id)}`,method:"GET"});e.success&&e.thumbnail_url&&(a({id:0,url:e.thumbnail_url,alt:e.title||"VK video thumbnail"}),console.log("‚úÖ VK poster auto-loaded:",e.thumbnail_url))}catch(e){console.error("‚ùå Could not fetch VK poster:",e)}finally{m(!1)}}else if("rutube"===e&&r.videoId){m(!0);try{const e=await wp.apiFetch({path:`/codeweber-gutenberg-blocks/v1/rutube-thumbnail/${r.videoId}`,method:"GET"});e.success&&e.thumbnail_url&&a({id:0,url:e.thumbnail_url,alt:e.title||"Rutube video thumbnail"})}catch(e){}finally{m(!1)}}},help:g.help,placeholder:g.placeholder,...h}),b&&(0,r.createElement)("div",{style:{marginTop:"8px",marginBottom:"8px",padding:"8px 12px",backgroundColor:"#f0f6fc",border:"1px solid #0073aa",borderRadius:"4px",color:"#0073aa",fontSize:"13px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"}},(0,r.createElement)("span",{style:{display:"inline-block",width:"14px",height:"14px",border:"2px solid #0073aa",borderTopColor:"transparent",borderRadius:"50%",animation:"spin 0.6s linear infinite"}}),(0,c.__)("Loading poster...","codeweber-gutenberg-blocks")))},k=({attributes:e,setAttributes:t})=>{const{mediaType:l,image:o,imageSize:s,imageMask:d,videoType:u,videoUrl:b,videoVimeoId:m,videoYoutubeId:g,videoVkId:p,videoRutubeId:k,videoEmbed:_,videoPoster:E,videoAutoplay:x,videoLoop:C,videoMuted:S,videoControls:T,showPlayIcon:I}=e,[P,L]=(0,i.useState)([]),[R,V]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if("vk"===u&&p){V(!0);const{oid:e,id:l}=y(p);e&&l?(console.log("üîÑ Auto-fetching VK poster (videoType or URL changed):",{oid:e,id:l,videoType:u}),wp.apiFetch({path:`/codeweber-gutenberg-blocks/v1/vk-thumbnail?oid=${encodeURIComponent(e)}&id=${encodeURIComponent(l)}`,method:"GET"}).then(e=>{e.success&&e.thumbnail_url&&(t({videoPoster:{id:0,url:e.thumbnail_url,alt:e.title||"VK video thumbnail"}}),console.log("‚úÖ VK poster auto-loaded:",e.thumbnail_url)),V(!1)}).catch(e=>{console.error("‚ùå Could not fetch VK poster:",e),V(!1)})):V(!1)}if("rutube"===u&&k){V(!0);const{videoId:e}=f(k);e&&e.match(/^[a-f0-9]{32}$/)?wp.apiFetch({path:`/codeweber-gutenberg-blocks/v1/rutube-thumbnail/${e}`,method:"GET"}).then(e=>{e.success&&e.thumbnail_url&&t({videoPoster:{id:0,url:e.thumbnail_url,alt:e.title||"Rutube video thumbnail"}}),V(!1)}).catch(e=>{V(!1)}):V(!1)}},[u,p,k]),(0,i.useEffect)(()=>{o.id&&o.id>0?wp.apiFetch({path:`/wp/v2/media/${o.id}`,method:"GET"}).then(e=>{if(e&&e.media_details&&e.media_details.sizes){const t=Object.keys(e.media_details.sizes);t.push("full"),L(t)}else L(["full"])}).catch(()=>{L([])}):L([])},[o.id]),(0,i.useEffect)(()=>{o.id&&o.id>0&&s&&wp.apiFetch({path:`/wp/v2/media/${o.id}`,method:"GET"}).then(e=>{let l=e.source_url;"full"!==s&&e.media_details&&e.media_details.sizes&&e.media_details.sizes[s]&&(l=e.media_details.sizes[s].source_url),l!==o.url&&t({image:{...o,url:l}})}).catch(e=>{console.error("Failed to fetch image data:",e)})},[s,o.id]),(0,r.createElement)("div",{className:"cwgb-media-control"},(0,r.createElement)("div",{className:"component-sidebar-title"},(0,r.createElement)("label",null,(0,c.__)("Media Type","codeweber-gutenberg-blocks"))),(0,r.createElement)(n.ButtonGroup,{className:"button-group-sidebar_2"},(0,r.createElement)(n.Button,{isPrimary:"image"===l,onClick:()=>t({mediaType:"image"})},(0,c.__)("Image","codeweber-gutenberg-blocks")),(0,r.createElement)(n.Button,{isPrimary:"video"===l,onClick:()=>t({mediaType:"video"})},(0,c.__)("Video","codeweber-gutenberg-blocks"))),"image"===l&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"component-sidebar-title"},(0,r.createElement)("label",null,(0,c.__)("Background Image","codeweber-gutenberg-blocks"))),(0,r.createElement)(a.MediaUploadCheck,null,(0,r.createElement)(a.MediaUpload,{onSelect:e=>{t({image:{id:e.id,url:e.url,sizes:e.sizes||{},alt:e.alt||"",title:e.title||"",caption:e.caption||"",description:e.description||""}})},allowedTypes:["image"],value:o.id,render:({open:e})=>(0,r.createElement)(r.Fragment,null,!o.url&&(0,r.createElement)("div",{className:"image-placeholder",onClick:e,style:{width:"100%",height:"100px",backgroundColor:"#f0f0f0",border:"2px dashed #ccc",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"15px"}},(0,r.createElement)("div",{style:{textAlign:"center",color:"#666"}},(0,r.createElement)("div",{style:{fontSize:"20px",marginBottom:"4px"}},"üì∑"),(0,r.createElement)("div",{style:{fontSize:"12px",fontWeight:"500"}},(0,c.__)("Select Image","codeweber-gutenberg-blocks")))),o.url&&(0,r.createElement)("div",{onClick:t=>{t.preventDefault(),e()},style:{marginTop:"12px",marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"140px",backgroundColor:"#fff",border:"1px solid #ddd",borderRadius:"4px",overflow:"hidden",cursor:"pointer",position:"relative"}},(0,r.createElement)("img",{src:o.url,alt:o.alt||"",style:{width:"100%",height:"auto",display:"block"}}),(0,r.createElement)(n.Button,{isLink:!0,onClick:e=>{e.stopPropagation(),t({image:{id:0,url:"",sizes:{},alt:"",title:"",caption:"",description:""}})},style:{position:"absolute",top:"6px",right:"6px",backgroundColor:"rgba(220, 53, 69, 0.8)",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",textDecoration:"none"}},(0,r.createElement)("i",{className:"uil uil-times",style:{margin:0,fontSize:"12px"}}))))})),o.url&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(h,{value:s,onChange:e=>t({imageSize:e}),label:(0,c.__)("Image Size","codeweber-gutenberg-blocks"),availableSizes:P}),(0,r.createElement)("div",{style:{marginTop:"16px"}},(0,r.createElement)(v,{attributes:e,setAttributes:t})),(0,r.createElement)("div",{style:{marginTop:"16px"}},(0,r.createElement)(n.SelectControl,{label:(0,c.__)("Image Mask","codeweber-gutenberg-blocks"),value:d,options:[{label:(0,c.__)("None","codeweber-gutenberg-blocks"),value:"none"},{label:(0,c.__)("Mask 1","codeweber-gutenberg-blocks"),value:"mask-1"},{label:(0,c.__)("Mask 2","codeweber-gutenberg-blocks"),value:"mask-2"},{label:(0,c.__)("Mask 3","codeweber-gutenberg-blocks"),value:"mask-3"}],onChange:e=>t({imageMask:e})})))),"video"===l&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"component-sidebar-title"},(0,r.createElement)("label",null,(0,c.__)("Video Type","codeweber-gutenberg-blocks"))),(0,r.createElement)(n.SelectControl,{value:u,options:[{label:(0,c.__)("HTML5 Video","codeweber-gutenberg-blocks"),value:"html5"},{label:(0,c.__)("Vimeo","codeweber-gutenberg-blocks"),value:"vimeo"},{label:(0,c.__)("YouTube","codeweber-gutenberg-blocks"),value:"youtube"},{label:(0,c.__)("VK Video","codeweber-gutenberg-blocks"),value:"vk"},{label:(0,c.__)("Rutube","codeweber-gutenberg-blocks"),value:"rutube"},{label:(0,c.__)("Embed Code","codeweber-gutenberg-blocks"),value:"embed"}],onChange:e=>t({videoType:e})}),"html5"===u&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"component-sidebar-title",style:{marginTop:"16px"}},(0,r.createElement)("label",null,(0,c.__)("Video File","codeweber-gutenberg-blocks"))),(0,r.createElement)(a.MediaUploadCheck,null,(0,r.createElement)(a.MediaUpload,{onSelect:e=>t({videoUrl:e.url}),allowedTypes:["video"],value:b,render:({open:e})=>(0,r.createElement)(r.Fragment,null,!b&&(0,r.createElement)("div",{onClick:e,style:{width:"100%",height:"100px",backgroundColor:"#f0f0f0",border:"2px dashed #ccc",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"15px"}},(0,r.createElement)("div",{style:{textAlign:"center",color:"#666"}},(0,r.createElement)("div",{style:{fontSize:"20px",marginBottom:"4px"}},"üé•"),(0,r.createElement)("div",{style:{fontSize:"12px",fontWeight:"500"}},(0,c.__)("Select Video","codeweber-gutenberg-blocks")))),b&&(0,r.createElement)("div",{onClick:e,style:{marginBottom:"12px",padding:"12px",background:"#f9f9f9",border:"1px solid #ddd",borderRadius:"4px",cursor:"pointer",position:"relative"}},(0,r.createElement)("div",{style:{fontSize:"12px",color:"#666",wordBreak:"break-all",paddingRight:"24px"}},b.split("/").pop()),(0,r.createElement)(n.Button,{isLink:!0,onClick:e=>{e.stopPropagation(),t({videoUrl:""})},style:{position:"absolute",top:"6px",right:"6px",backgroundColor:"rgba(220, 53, 69, 0.8)",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",textDecoration:"none"}},(0,r.createElement)("i",{className:"uil uil-times",style:{margin:0,fontSize:"12px"}}))))}))),"vimeo"===u&&(0,r.createElement)(n.TextControl,{label:(0,c.__)("Vimeo Video ID","codeweber-gutenberg-blocks"),value:m||"",onChange:e=>t({videoVimeoId:e}),help:(0,c.__)("Example: 15801179","codeweber-gutenberg-blocks")}),"youtube"===u&&(0,r.createElement)(n.TextControl,{label:(0,c.__)("YouTube Video ID","codeweber-gutenberg-blocks"),value:g||"",onChange:e=>t({videoYoutubeId:e}),help:(0,c.__)("Example: j_Y2Gwaj7Gs","codeweber-gutenberg-blocks")}),"vk"===u&&(0,r.createElement)(w,{videoType:"vk",value:p||"",onChange:(e,l)=>{t({videoVkId:e})},autoloadPoster:!0,onPosterLoad:e=>{t({videoPoster:e})},multiline:!0}),"rutube"===u&&(0,r.createElement)(w,{videoType:"rutube",value:k||"",onChange:(e,l)=>{t({videoRutubeId:e})},autoloadPoster:!0,onPosterLoad:e=>{t({videoPoster:e})},multiline:!0}),"embed"===u&&(0,r.createElement)(n.TextareaControl,{label:(0,c.__)("Embed Code","codeweber-gutenberg-blocks"),value:_||"",onChange:e=>t({videoEmbed:e}),help:(0,c.__)("Paste iframe or embed code","codeweber-gutenberg-blocks"),rows:5}),"embed"!==u&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{className:"component-sidebar-title",style:{marginTop:"16px"}},(0,r.createElement)("label",null,(0,c.__)("Video Poster","codeweber-gutenberg-blocks"))),(0,r.createElement)(a.MediaUploadCheck,null,(0,r.createElement)(a.MediaUpload,{onSelect:e=>t({videoPoster:{id:e.id,url:e.url,alt:e.alt||""}}),allowedTypes:["image"],value:E.id,render:({open:e})=>(0,r.createElement)(r.Fragment,null,!E.url&&(0,r.createElement)("div",{onClick:e,style:{width:"100%",height:"100px",backgroundColor:"#f0f0f0",border:"2px dashed #ccc",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",marginBottom:"15px"}},(0,r.createElement)("div",{style:{textAlign:"center",color:"#666"}},(0,r.createElement)("div",{style:{fontSize:"20px",marginBottom:"4px"}},"üì∑"),(0,r.createElement)("div",{style:{fontSize:"12px",fontWeight:"500"}},(0,c.__)("Select Poster","codeweber-gutenberg-blocks")))),E.url&&(0,r.createElement)("div",{onClick:e,style:{marginBottom:"12px",display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100px",backgroundColor:"#fff",border:"1px solid #ddd",borderRadius:"4px",overflow:"hidden",cursor:"pointer",position:"relative"}},(0,r.createElement)("img",{src:E.url,alt:E.alt||"",style:{width:"100%",height:"auto",display:"block"}}),(0,r.createElement)(n.Button,{isLink:!0,onClick:e=>{e.stopPropagation(),t({videoPoster:{id:0,url:"",alt:""}})},style:{position:"absolute",top:"6px",right:"6px",backgroundColor:"rgba(220, 53, 69, 0.8)",borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",textDecoration:"none"}},(0,r.createElement)("i",{className:"uil uil-times",style:{margin:0,fontSize:"12px"}}))))})),R&&(0,r.createElement)("div",{style:{marginTop:"8px",marginBottom:"15px",padding:"8px 12px",backgroundColor:"#f0f6fc",border:"1px solid #0073aa",borderRadius:"4px",color:"#0073aa",fontSize:"13px",fontWeight:"500",display:"flex",alignItems:"center",gap:"8px"}},(0,r.createElement)("span",{style:{display:"inline-block",width:"14px",height:"14px",border:"2px solid #0073aa",borderTopColor:"transparent",borderRadius:"50%",animation:"spin 0.6s linear infinite"}}),(0,c.__)("Loading poster...","codeweber-gutenberg-blocks")),("vk"===u||"rutube"===u)&&!R&&(0,r.createElement)(n.Button,{variant:"secondary",onClick:async()=>{if(V(!0),"rutube"===u&&k){const{videoId:e}=f(k);if(e)try{const l=await wp.apiFetch({path:`/codeweber-gutenberg-blocks/v1/rutube-thumbnail/${e}`,method:"GET"});l.success&&l.thumbnail_url&&t({videoPoster:{id:0,url:l.thumbnail_url,alt:l.title||"Rutube video thumbnail"}})}catch(e){}finally{V(!1)}else V(!1)}else if("vk"===u&&p){const{oid:e,id:l}=y(p);if(console.log("üîç Extracted VK oid/id:",{oid:e,id:l}),e&&l){console.log("üîÑ Manual fetch VK poster:",{oid:e,id:l});try{const o=await wp.apiFetch({path:`/codeweber-gutenberg-blocks/v1/vk-thumbnail?oid=${encodeURIComponent(e)}&id=${encodeURIComponent(l)}`,method:"GET"});o.success&&o.thumbnail_url&&(t({videoPoster:{id:0,url:o.thumbnail_url,alt:o.title||"VK video thumbnail"}}),console.log("‚úÖ VK poster loaded manually"))}catch(e){console.error("‚ùå Failed to load VK poster:",e)}finally{V(!1)}}else V(!1)}},style:{marginTop:"8px",marginBottom:"15px",width:"100%"}},(0,c.__)("Auto-load Poster from Provider","codeweber-gutenberg-blocks"))),"html5"===u&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(n.ToggleControl,{label:(0,c.__)("Autoplay","codeweber-gutenberg-blocks"),checked:x,onChange:e=>t({videoAutoplay:e})}),(0,r.createElement)(n.ToggleControl,{label:(0,c.__)("Loop","codeweber-gutenberg-blocks"),checked:C,onChange:e=>t({videoLoop:e})}),(0,r.createElement)(n.ToggleControl,{label:(0,c.__)("Muted","codeweber-gutenberg-blocks"),checked:S,onChange:e=>t({videoMuted:e})}),(0,r.createElement)(n.ToggleControl,{label:(0,c.__)("Show Controls","codeweber-gutenberg-blocks"),checked:T,onChange:e=>t({videoControls:e})})),(0,r.createElement)(n.ToggleControl,{label:(0,c.__)("Show Play Icon","codeweber-gutenberg-blocks"),checked:I,onChange:e=>t({showPlayIcon:e})})))},_=({attributes:e,setAttributes:t})=>{const{simpleEffect:l="none",effectType:o="none",tooltipStyle:a="itooltip-dark",overlayStyle:i="overlay-1",overlayGradient:s="gradient-1",overlayColor:d=!1,cursorStyle:u="cursor-dark"}=e;return(0,r.createElement)(r.Fragment,null,(0,r.createElement)("div",{style:{marginBottom:"16px"}},(0,r.createElement)("div",{className:"component-sidebar-title"},(0,r.createElement)("label",null,(0,c.__)("Simple Effects (Choose One)","codeweber-gutenberg-blocks"))),(0,r.createElement)("div",{className:"button-group-sidebar_33"},(0,r.createElement)(n.Button,{isPrimary:"none"===l,isSecondary:"none"!==l,onClick:()=>{t({simpleEffect:"none"})}},(0,c.__)("None","codeweber-gutenberg-blocks")),(0,r.createElement)(n.Button,{isPrimary:"lift"===l,isSecondary:"lift"!==l,onClick:()=>{t({simpleEffect:"lift"})}},(0,c.__)("Lift","codeweber-gutenberg-blocks")),(0,r.createElement)(n.Button,{isPrimary:"hover-scale"===l,isSecondary:"hover-scale"!==l,onClick:()=>{t({simpleEffect:"hover-scale"})}},(0,c.__)("Hover Scale","codeweber-gutenberg-blocks")))),(0,r.createElement)("div",{style:{marginBottom:"16px"}},(0,r.createElement)("div",{className:"component-sidebar-title"},(0,r.createElement)("label",null,(0,c.__)("Advanced Effects (Choose One)","codeweber-gutenberg-blocks"))),(0,r.createElement)("div",{className:"button-group-sidebar_50"},(0,r.createElement)(n.Button,{isPrimary:"none"===o,isSecondary:"none"!==o,onClick:()=>{t({effectType:"none"})}},(0,c.__)("None","codeweber-gutenberg-blocks")),(0,r.createElement)(n.Button,{isPrimary:"tooltip"===o,isSecondary:"tooltip"!==o,onClick:()=>{t({effectType:"tooltip"})}},(0,c.__)("Tooltip","codeweber-gutenberg-blocks")),(0,r.createElement)(n.Button,{isPrimary:"overlay"===o,isSecondary:"overlay"!==o,onClick:()=>{t({effectType:"overlay"})}},(0,c.__)("Overlay","codeweber-gutenberg-blocks")),(0,r.createElement)(n.Button,{isPrimary:"cursor"===o,isSecondary:"cursor"!==o,onClick:e=>{console.log("üü¢ Advanced Effect CLICKED: cursor","Current:",o,"Event:",e),t({effectType:"cursor"}),console.log("‚úÖ setAttributes called for: cursor")}},(0,c.__)("Cursor","codeweber-gutenberg-blocks")))),"tooltip"===o&&(0,r.createElement)("div",{style:{marginBottom:"16px"}},(0,r.createElement)(n.SelectControl,{label:(0,c.__)("Tooltip Style","codeweber-gutenberg-blocks"),value:a,options:[{label:(0,c.__)("Dark","codeweber-gutenberg-blocks"),value:"itooltip-dark"},{label:(0,c.__)("Light","codeweber-gutenberg-blocks"),value:"itooltip-light"},{label:(0,c.__)("Primary","codeweber-gutenberg-blocks"),value:"itooltip-primary"}],onChange:e=>t({tooltipStyle:e})})),"overlay"===o&&(0,r.createElement)("div",{style:{marginBottom:"16px"}},(0,r.createElement)(n.SelectControl,{label:(0,c.__)("Overlay Style","codeweber-gutenberg-blocks"),value:i,options:[{label:(0,c.__)("Overlay 1 (Basic)","codeweber-gutenberg-blocks"),value:"overlay-1"},{label:(0,c.__)("Overlay 2 (Color)","codeweber-gutenberg-blocks"),value:"overlay-2"},{label:(0,c.__)("Overlay 3 (Gradient)","codeweber-gutenberg-blocks"),value:"overlay-3"},{label:(0,c.__)("Overlay 4 (Icon)","codeweber-gutenberg-blocks"),value:"overlay-4"}],onChange:e=>t({overlayStyle:e})}),"overlay-2"===i&&(0,r.createElement)(n.ToggleControl,{label:(0,c.__)("Primary Color","codeweber-gutenberg-blocks"),help:(0,c.__)('Adds "color" class for primary color overlay',"codeweber-gutenberg-blocks"),checked:d,onChange:e=>t({overlayColor:e})}),"overlay-3"===i&&(0,r.createElement)(n.SelectControl,{label:(0,c.__)("Gradient","codeweber-gutenberg-blocks"),value:s,options:[{label:(0,c.__)("Gradient 1","codeweber-gutenberg-blocks"),value:"gradient-1"},{label:(0,c.__)("Gradient 2","codeweber-gutenberg-blocks"),value:"gradient-2"},{label:(0,c.__)("Gradient 3","codeweber-gutenberg-blocks"),value:"gradient-3"},{label:(0,c.__)("Gradient 4","codeweber-gutenberg-blocks"),value:"gradient-4"},{label:(0,c.__)("Gradient 5","codeweber-gutenberg-blocks"),value:"gradient-5"},{label:(0,c.__)("Gradient 6","codeweber-gutenberg-blocks"),value:"gradient-6"},{label:(0,c.__)("Gradient 7","codeweber-gutenberg-blocks"),value:"gradient-7"}],onChange:e=>t({overlayGradient:e})})),"cursor"===o&&(0,r.createElement)("div",{style:{marginBottom:"16px"}},(0,r.createElement)(n.SelectControl,{label:(0,c.__)("Cursor Style","codeweber-gutenberg-blocks"),value:u,options:[{label:(0,c.__)("Dark","codeweber-gutenberg-blocks"),value:"cursor-dark"},{label:(0,c.__)("Light","codeweber-gutenberg-blocks"),value:"cursor-light"},{label:(0,c.__)("Primary","codeweber-gutenberg-blocks"),value:"cursor-primary"}],onChange:e=>t({cursorStyle:e})})))},E=[{value:"",label:(0,c.__)("Default","codeweber-gutenberg-blocks")},{value:"rounded-0",label:(0,c.__)("Rounded-0 (0)","codeweber-gutenberg-blocks")},{value:"rounded-1",label:(0,c.__)("Rounded-1 (0.2rem)","codeweber-gutenberg-blocks")},{value:"rounded-2",label:(0,c.__)("Rounded-2 (0.25rem)","codeweber-gutenberg-blocks")},{value:"rounded",label:(0,c.__)("Rounded (0.4rem)","codeweber-gutenberg-blocks")},{value:"rounded-3",label:(0,c.__)("Rounded-3 (0.5rem)","codeweber-gutenberg-blocks")},{value:"rounded-4",label:(0,c.__)("Rounded-4 (1rem)","codeweber-gutenberg-blocks")},{value:"rounded-5",label:(0,c.__)("Rounded-5 (1.5rem)","codeweber-gutenberg-blocks")},{value:"rounded-xl",label:(0,c.__)("Rounded-xl (0.8rem - Theme)","codeweber-gutenberg-blocks")},{value:"rounded-pill",label:(0,c.__)("Rounded-pill (50rem)","codeweber-gutenberg-blocks")},{value:"rounded-circle",label:(0,c.__)("Rounded-circle (50%)","codeweber-gutenberg-blocks")}],x=((0,c.__)("All Sides","codeweber-gutenberg-blocks"),(0,c.__)("Top Only","codeweber-gutenberg-blocks"),(0,c.__)("Bottom Only","codeweber-gutenberg-blocks"),(0,c.__)("Start (Left) Only","codeweber-gutenberg-blocks"),(0,c.__)("End (Right) Only","codeweber-gutenberg-blocks"),({value:e="",onChange:t,label:l=(0,c.__)("Border Radius","codeweber-gutenberg-blocks"),help:o=""})=>(0,r.createElement)(n.SelectControl,{label:l,value:e,options:E,onChange:t,help:o})),C=({attributes:e,setAttributes:t,fieldKeys:l={classKey:"sectionClass",dataKey:"sectionData",idKey:"sectionId"},labels:o={classLabel:(0,c.__)("Block Class","codeweber-gutenberg-blocks"),dataLabel:(0,c.__)("Block Data","codeweber-gutenberg-blocks"),idLabel:(0,c.__)("Block ID","codeweber-gutenberg-blocks")},placeholders:a={classPlaceholder:(0,c.__)("custom-wrapper classes","codeweber-gutenberg-blocks"),dataPlaceholder:(0,c.__)("key=value,key2=value2","codeweber-gutenberg-blocks"),idPlaceholder:(0,c.__)("custom-id","codeweber-gutenberg-blocks")}})=>{const i=(e,o)=>{let r=o;e===l.idKey&&(r=((e="")=>e.replace(/^#/,"").trim())(o)),t({[e]:r})};return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(n.TextControl,{label:o.classLabel,value:e[l.classKey]||"",placeholder:a.classPlaceholder,onChange:e=>i(l.classKey,e)}),(0,r.createElement)(n.TextControl,{label:o.dataLabel,value:e[l.dataKey]||"",placeholder:a.dataPlaceholder,help:(0,c.__)("Comma separated pairs: key=value,key2=value2","codeweber-gutenberg-blocks"),onChange:e=>i(l.dataKey,e)}),(0,r.createElement)(n.TextControl,{label:o.idLabel,value:e[l.idKey]||"",placeholder:a.idPlaceholder,onChange:e=>i(l.idKey,e)}))},S=({icon:e,label:t})=>(0,r.createElement)("span",{title:t,style:{display:"flex",alignItems:"center",justifyContent:"center"}},(0,r.createElement)(s,{icon:e,size:20})),T=({attributes:e,setAttributes:t})=>{const l=[{name:"media",title:(0,r.createElement)(S,{icon:u,label:(0,c.__)("Media","codeweber-gutenberg-blocks")})},{name:"effects",title:(0,r.createElement)(S,{icon:b,label:(0,c.__)("Effects","codeweber-gutenberg-blocks")})},{name:"settings",title:(0,r.createElement)(S,{icon:m,label:(0,c.__)("Settings","codeweber-gutenberg-blocks")})}];return(0,r.createElement)(a.InspectorControls,null,(0,r.createElement)(n.TabPanel,{tabs:l},l=>(0,r.createElement)(r.Fragment,null,"media"===l.name&&(0,r.createElement)(n.PanelBody,null,(0,r.createElement)(k,{attributes:e,setAttributes:t}),"video"===e.mediaType&&(0,r.createElement)("div",{style:{marginTop:"16px"}},(0,r.createElement)(n.ToggleControl,{label:(0,c.__)("Enable Video Lightbox","codeweber-gutenberg-blocks"),checked:e.videoLightbox,onChange:e=>t({videoLightbox:e})})),"image"===e.mediaType&&e.image.url&&(0,r.createElement)("div",{style:{marginTop:"16px"}},(0,r.createElement)(x,{value:e.borderRadius,onChange:e=>t({borderRadius:e})}))),"effects"===l.name&&(0,r.createElement)(n.PanelBody,null,"image"===e.mediaType&&e.image.url?(0,r.createElement)(_,{attributes:e,setAttributes:t}):(0,r.createElement)("p",{style:{color:"#757575",fontSize:"13px"}},(0,c.__)("Hover effects are only available for images.","codeweber-gutenberg-blocks"))),"settings"===l.name&&(0,r.createElement)(n.PanelBody,null,(0,r.createElement)(C,{attributes:e,setAttributes:t,fieldKeys:{classKey:"blockClass",dataKey:"blockData",idKey:"blockId"},labels:{classLabel:(0,c.__)("Block Class","codeweber-gutenberg-blocks"),dataLabel:(0,c.__)("Block Data","codeweber-gutenberg-blocks"),idLabel:(0,c.__)("Block ID","codeweber-gutenberg-blocks")}})))))},I=({attributes:e,isEditor:t=!1})=>{const{image:l,imageSize:o,imageMask:a,borderRadius:i,enableLightbox:n,lightboxGallery:c,simpleEffect:s,effectType:d,tooltipStyle:u,overlayStyle:b,overlayGradient:m,overlayColor:g,cursorStyle:p}=e;if(!l||!l.url)return null;const h=((e,t="full")=>e?"full"!==t&&e.sizes&&e.sizes[t]&&e.sizes[t].source_url?e.sizes[t].source_url:e.url:"")(l,o),v=(e=>{const{simpleEffect:t="none",effectType:l="none",tooltipStyle:o="itooltip-dark",overlayStyle:r="overlay-1",overlayGradient:a="gradient-1",overlayColor:i=!1,cursorStyle:n="cursor-dark"}=e,c=[];switch(t&&"none"!==t&&c.push(t),l){case"tooltip":c.push("itooltip",o);break;case"overlay":c.push("overlay",r),"overlay-2"===r&&i&&c.push("color"),"overlay-3"===r&&a&&c.push(`overlay-${a}`);break;case"cursor":c.push(n)}return c.filter(Boolean).join(" ")})(e),y=((e,t)=>{if(!e||"tooltip"!==t)return"";let l="";const o=e.title||e.caption;return o&&(l+=`<h5 class="mb-1">${o}</h5>`),e.description&&(l+=`<p class="mb-0">${e.description}</p>`),l})(d,u),f=((e=!1,t="",l="image",o="")=>{if(!e)return{};const r={"data-glightbox":""};return t&&""!==t.trim()&&(r["data-gallery"]=t),o&&""!==o.trim()&&(r["data-glightbox-title"]=o),r})(n,c),w=n&&!t?l.url:"#",k=e=>{t&&(e.preventDefault(),e.stopPropagation())},_=[v,i].filter(Boolean).join(" "),E=(0,r.createElement)("img",{src:h,alt:l.alt||""}),x=a&&"none"!==a?(0,r.createElement)("div",{className:`img-mask ${a}`},E):E,C=t?{pointerEvents:"none",cursor:"default"}:void 0;if("tooltip"===d&&y)return(0,r.createElement)("figure",{className:_,title:y},(0,r.createElement)("a",{href:w,onClick:k,...f,style:C},x));if("overlay"===d){const e=l.caption||l.title||"";return"overlay-4"===b?(0,r.createElement)("figure",{className:_},(0,r.createElement)("a",{href:w,onClick:k,...f,style:C},x),e&&(0,r.createElement)("figcaption",null,(0,r.createElement)("h2",{className:"mb-0"},"+"))):(0,r.createElement)("figure",{className:_},(0,r.createElement)("a",{href:w,onClick:k,...f,style:C},x),e&&(0,r.createElement)("figcaption",null,(0,r.createElement)("h5",{className:"from-top mb-0"},e)))}return(0,r.createElement)("figure",{className:_},(0,r.createElement)("a",{href:w,onClick:k,...f,style:C},x))},P=({attributes:e,isEditor:t=!1,setAttributes:l})=>{const{videoType:o,videoUrl:a,videoVimeoId:i,videoYoutubeId:n,videoVkId:s,videoRutubeId:d,videoEmbed:u,videoPoster:b,videoAutoplay:m,videoLoop:g,videoMuted:p,videoControls:h,showPlayIcon:v,videoLightbox:y,lightboxUniqueId:f}=e,w=()=>{if("vk"===o&&s){console.log("üîç VK - Starting parsing:",s);let e="";if(s.includes("<iframe")){const t=s.match(/src=["']([^"']+)["']/);t&&t[1]&&(e=t[1],console.log("‚úÖ VK - Extracted from iframe:",e))}else if(s.includes("vkvideo.ru")||s.includes("vk.com/video"))try{const t=new URL(s.includes("http")?s:`https://${s}`);if(console.log("üîç VK - Parsed URL:",t.href),t.pathname.includes("video_ext.php"))e=t.href,console.log("‚úÖ VK - Already embed URL:",e);else{const l=t.pathname.match(/video(-?\d+)_(\d+)/);if(l){e=`https://vkvideo.ru/video_ext.php?oid=${l[1]}&id=${l[2]}`,console.log("‚úÖ VK - Converted to embed:",e)}}}catch(e){console.error("‚ùå VK URL parsing error:",e)}else if(s.includes("_")||s.includes("oid="))if(s.includes("oid="))e=`https://vkvideo.ru/video_ext.php?${s}`,console.log("‚úÖ VK - From params:",e);else{const t=s.split("_");e=`https://vkvideo.ru/video_ext.php?oid=${t[0]}&id=${t[1]}`,console.log("‚úÖ VK - From ID format:",e)}return console.log("üéØ VK - Final URL:",e),e}if("rutube"===o&&d){let e=d;if(d.includes("<iframe")){const t=d.match(/src=["']([^"']+)["']/);if(t&&t[1]){const l=t[1].match(/\/embed\/([a-f0-9]+)/);l&&l[1]&&(e=l[1])}}else if(d.includes("rutube.ru"))try{const t=new URL(d.includes("http")?d:`https://${d}`).pathname.match(/\/(?:video|embed)\/([a-f0-9]+)/);t&&t[1]&&(e=t[1])}catch(e){}return`https://rutube.ru/play/embed/${e}`}return""};if(y&&("html5"===o||"vimeo"===o||"youtube"===o||"vk"===o||"rutube"===o)){let e="",l="",c=null;const u=f||`video-${(s||d||n||i||"default").substr(0,9).replace(/[^a-z0-9]/gi,"")}`;if("youtube"===o)e=`https://www.youtube.com/watch?v=${n}`,l="";else if("vimeo"===o)e=`https://vimeo.com/${i}`,l="";else if("html5"===o)e=a,l="";else if("vk"===o||"rutube"===o){const t=w();if(!t)return null;e=`#${u}`,l="width: auto;",c=(0,r.createElement)("div",{id:u,style:{display:"none"}},(0,r.createElement)("iframe",{src:t,allow:"autoplay; encrypted-media; fullscreen; picture-in-picture; clipboard-write;",frameBorder:"0",allowFullScreen:!0,style:{width:"100%",height:"100%",aspectRatio:"16/9"}}))}if(!e)return null;const m=t?"#":e,g=t?e=>e.preventDefault():void 0,p=t?{pointerEvents:"none",cursor:"default"}:void 0;return(0,r.createElement)(r.Fragment,null,c,(0,r.createElement)("figure",{className:"position-relative"},(0,r.createElement)("a",{href:m,onClick:g,"data-glightbox":!t&&l?l:void 0,style:p},b.url?(0,r.createElement)("img",{src:b.url,alt:b.alt||""}):(0,r.createElement)("div",{style:{width:"100%",paddingTop:"56.25%",background:"#000",position:"relative"}}),v&&(0,r.createElement)("button",{type:"button",className:"video-play-btn position-absolute top-50 start-50 translate-middle","aria-label":"Play"},(0,r.createElement)("svg",{width:"117",height:"135",viewBox:"0 0 117 135",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)("path",{d:"M0 0L116.978 67.2L0 134.4V0Z",fill:"currentColor"}))))))}if("html5"===o&&a){if(t)return(0,r.createElement)("div",{style:{position:"relative"}},b.url?(0,r.createElement)("img",{src:b.url,alt:"",style:{width:"100%",height:"auto"}}):(0,r.createElement)("div",{style:{width:"100%",paddingTop:"56.25%",background:"#000",position:"relative"}}),(0,r.createElement)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#fff",fontSize:"14px",background:"rgba(0,0,0,0.7)",padding:"8px 12px",borderRadius:"4px"}},(0,c.__)("Video Player (Preview)","codeweber-gutenberg-blocks")));const e={poster:b.url||void 0,className:"player",playsInline:!0,controls:h,preload:"none"};return m&&(e.autoPlay=!0),g&&(e.loop=!0),p&&(e.muted=!0),(0,r.createElement)("video",{...e},(0,r.createElement)("source",{src:a,type:"video/mp4"}))}if("vimeo"===o&&i)return(0,r.createElement)("div",{className:"player","data-plyr-provider":"vimeo","data-plyr-embed-id":i});if("youtube"===o&&n)return(0,r.createElement)("div",{className:"player","data-plyr-provider":"youtube","data-plyr-embed-id":n});if("vk"===o&&s){const e=w();return e?(0,r.createElement)("div",{className:"ratio ratio-16x9"},(0,r.createElement)("iframe",{src:e,allow:"autoplay; encrypted-media; fullscreen; picture-in-picture",frameBorder:"0",allowFullScreen:!0})):null}if("rutube"===o&&d){const e=w();return e?(0,r.createElement)("div",{className:"ratio ratio-16x9"},(0,r.createElement)("iframe",{src:e,allow:"clipboard-write; autoplay",frameBorder:"0",allowFullScreen:!0})):null}return"embed"===o&&u?(0,r.createElement)("div",{className:"ratio ratio-16x9"},(0,r.createElement)("div",{dangerouslySetInnerHTML:{__html:u}})):t?(0,r.createElement)("div",{style:{padding:"40px",textAlign:"center",background:"#f0f0f0",border:"2px dashed #ccc",borderRadius:"4px"}},(0,r.createElement)("p",{style:{margin:0,color:"#666"}},"html5"===o&&(0,c.__)("Upload video file","codeweber-gutenberg-blocks"),"vimeo"===o&&(0,c.__)("Enter Vimeo video ID","codeweber-gutenberg-blocks"),"youtube"===o&&(0,c.__)("Enter YouTube video ID","codeweber-gutenberg-blocks"),"vk"===o&&(0,c.__)("Enter VK video ID","codeweber-gutenberg-blocks"),"rutube"===o&&(0,c.__)("Enter Rutube video ID","codeweber-gutenberg-blocks"),"embed"===o&&(0,c.__)("Paste embed code","codeweber-gutenberg-blocks"))):null},L=(e=".player")=>{if("undefined"==typeof window)return!1;const t=document.querySelectorAll(e);if(!t||0===t.length)return!1;try{return t.forEach(e=>{e.plyr&&e.plyr.destroy()}),!0}catch(e){return console.error("Plyr destroy error:",e),!1}},R=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"codeweber-blocks/media","version":"1.0.0","title":"Media","category":"codeweber-gutenberg-elements","icon":"format-image","description":"Display image or video with effects, masks and lightbox","keywords":["image","video","mask","lightbox","hover"],"textdomain":"codeweber-gutenberg-blocks","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css","supports":{"html":false,"customClassName":true},"attributes":{"mediaType":{"type":"string","default":"image"},"image":{"type":"object","default":{"id":0,"url":"","sizes":{},"alt":"","title":"","caption":"","description":""}},"imageSize":{"type":"string","default":"full"},"imageMask":{"type":"string","default":"none"},"borderRadius":{"type":"string","default":""},"videoType":{"type":"string","default":"html5"},"videoUrl":{"type":"string","default":""},"videoVimeoId":{"type":"string","default":""},"videoYoutubeId":{"type":"string","default":""},"videoVkId":{"type":"string","default":""},"videoRutubeId":{"type":"string","default":""},"videoEmbed":{"type":"string","default":""},"videoPoster":{"type":"object","default":{"id":0,"url":"","alt":""}},"videoAutoplay":{"type":"boolean","default":false},"videoLoop":{"type":"boolean","default":false},"videoMuted":{"type":"boolean","default":false},"videoControls":{"type":"boolean","default":true},"showPlayIcon":{"type":"boolean","default":true},"simpleEffect":{"type":"string","default":"none"},"effectType":{"type":"string","default":"none"},"tooltipStyle":{"type":"string","default":"itooltip"},"overlayStyle":{"type":"string","default":"overlay-1"},"overlayGradient":{"type":"boolean","default":false},"overlayColor":{"type":"string","default":"primary"},"cursorStyle":{"type":"boolean","default":false},"enableLightbox":{"type":"boolean","default":false},"lightboxGallery":{"type":"string","default":"gallery-1"},"videoLightbox":{"type":"boolean","default":false},"lightboxUniqueId":{"type":"string","default":""},"blockClass":{"type":"string","default":""},"blockId":{"type":"string","default":""},"blockData":{"type":"string","default":""}}}');console.log("üîµ Registering Media block:",R.name),(0,o.registerBlockType)(R.name,{...R,edit:function({attributes:e,setAttributes:t,clientId:l}){const{mediaType:o,image:n,imageSize:c,effectType:s,simpleEffect:d,tooltipStyle:u,overlayStyle:b,overlayGradient:m,overlayColor:g,cursorStyle:p,enableLightbox:h,videoType:v,videoLightbox:y,videoVimeoId:f,videoYoutubeId:w,videoVkId:k,videoRutubeId:_,videoUrl:E}=e,x=(0,a.useBlockProps)({className:"cwgb-media-block"}),C=(0,i.useMemo)(()=>`${d}-${s}-${u}-${b}-${m}-${g}-${p}`,[d,s,u,b,m,g,p]);return(0,i.useEffect)(()=>{if(y&&("vk"===v||"rutube"===v)&&!e.lightboxUniqueId){const e=`video-${Math.random().toString(36).substr(2,9)}`;t({lightboxUniqueId:e})}},[y,v,e.lightboxUniqueId]),(0,i.useEffect)(()=>{if("undefined"==typeof window||!window.theme)return;L();const e=setTimeout(()=>{try{document.querySelectorAll(".cwgb-media-block .overlay > a > span.bg, .cwgb-media-block .overlay > span > span.bg").forEach(e=>e.remove()),"image"===o&&"overlay"===s&&"function"==typeof window.theme?.imageHoverOverlay&&window.theme.imageHoverOverlay(),"image"===o&&"tooltip"===s&&"function"==typeof window.theme?.iTooltip&&window.theme.iTooltip(),("image"===o&&h||"video"===o&&y)&&((e=null)=>{if("undefined"==typeof window)return!1;if("function"==typeof window.theme?.initLightbox)try{return window.theme.initLightbox(e),!0}catch(e){return console.error("Error initializing GLightbox:",e),!1}if("function"==typeof window.GLightbox)try{const t={selector:e||"[data-glightbox]",touchNavigation:!0,loop:!0,autoplayVideos:!0};return window.GLightbox(t),!0}catch(e){return console.error("Error initializing GLightbox directly:",e),!1}console.warn("GLightbox is not available. Please ensure GLightbox library is loaded.")})(),"video"!==o||y||"youtube"!==v&&"vimeo"!==v||setTimeout(()=>{((e=".player")=>{if("undefined"==typeof window)return!1;if(void 0===window.Plyr)return console.warn("Plyr library not loaded"),!1;const t=document.querySelectorAll(e);if(!t||0===t.length)return!1;try{return t.forEach(e=>{e.plyr||new window.Plyr(e,{controls:["play-large","play","progress","current-time","mute","volume","settings","fullscreen"]})}),!0}catch(e){return console.error("Plyr initialization error:",e),!1}})()},200)}catch(e){console.error("Library initialization failed (media):",e)}},300);return()=>{clearTimeout(e),L()}},[o,n.url,c,s,d,u,b,m,g,p,h,y,v,f,w,k,_,E,l]),(0,r.createElement)(r.Fragment,null,(0,r.createElement)(T,{attributes:e,setAttributes:t}),(0,r.createElement)("div",{...x},"image"===o?n.url?(0,r.createElement)("div",{key:`image-${C}-${c}`},(0,r.createElement)(I,{attributes:e,isEditor:!0})):(0,r.createElement)("div",{style:{padding:"40px",textAlign:"center",background:"#f0f0f0",border:"2px dashed #ccc",borderRadius:"4px"}},(0,r.createElement)("p",{style:{margin:0,color:"#666"}},"Select an image from the sidebar")):(0,r.createElement)("div",{key:`video-${v}-${y}-${f}-${w}-${k}-${_}-${E}`},(0,r.createElement)(P,{attributes:e,isEditor:!0,setAttributes:t}))))},save:function({attributes:e}){const{mediaType:t,blockClass:l,blockId:o,blockData:i}=e,n=a.useBlockProps.save({className:`cwgb-media-block ${l||""}`.trim(),id:o||void 0,"data-block":i||void 0});return(0,r.createElement)("div",{...n},"image"===t?(0,r.createElement)(I,{attributes:e,isEditor:!1}):(0,r.createElement)(P,{attributes:e,isEditor:!1}))}})}},l={};function o(e){var r=l[e];if(void 0!==r)return r.exports;var a=l[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.m=t,e=[],o.O=(t,l,r,a)=>{if(!l){var i=1/0;for(d=0;d<e.length;d++){for(var[l,r,a]=e[d],n=!0,c=0;c<l.length;c++)(!1&a||i>=a)&&Object.keys(o.O).every(e=>o.O[e](l[c]))?l.splice(c--,1):(n=!1,a<i&&(i=a));if(n){e.splice(d--,1);var s=r();void 0!==s&&(t=s)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[l,r,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var l in t)o.o(t,l)&&!o.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={5825:0,9877:0};o.O.j=t=>0===e[t];var t=(t,l)=>{var r,a,[i,n,c]=l,s=0;if(i.some(t=>0!==e[t])){for(r in n)o.o(n,r)&&(o.m[r]=n[r]);if(c)var d=c(o)}for(t&&t(l);s<i.length;s++)a=i[s],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},l=globalThis.webpackChunkcodeweber_gutenberg_blocks=globalThis.webpackChunkcodeweber_gutenberg_blocks||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var r=o.O(void 0,[9877],()=>o(528));r=o.O(r)})();