(()=>{"use strict";var e,t={698:(e,t,l)=>{const r=window.wp.blocks,o=window.React,a=window.wp.primitives,c=(0,o.createElement)(a.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,o.createElement)(a.Path,{d:"M20.8 10.7l-4.3-4.3-1.1 1.1 4.3 4.3c.1.1.1.3 0 .4l-4.3 4.3 1.1 1.1 4.3-4.3c.7-.8.7-1.9 0-2.6zM4.2 11.8l4.3-4.3-1-1-4.3 4.3c-.7.7-.7 1.8 0 2.5l4.3 4.3 1.1-1.1-4.3-4.3c-.2-.1-.2-.3-.1-.4z"})),n=window.wp.blockEditor,s=window.wp.components,b=window.wp.i18n,d=window.wp.element,i=({attributes:e,setAttributes:t,fieldKeys:l={classKey:"sectionClass",dataKey:"sectionData",idKey:"sectionId"},labels:r={classLabel:(0,b.__)("Block Class","codeweber-gutenberg-blocks"),dataLabel:(0,b.__)("Block Data","codeweber-gutenberg-blocks"),idLabel:(0,b.__)("Block ID","codeweber-gutenberg-blocks")},placeholders:a={classPlaceholder:(0,b.__)("custom-wrapper classes","codeweber-gutenberg-blocks"),dataPlaceholder:(0,b.__)("key=value,key2=value2","codeweber-gutenberg-blocks"),idPlaceholder:(0,b.__)("custom-id","codeweber-gutenberg-blocks")}})=>{const c=(e,r)=>{let o=r;e===l.idKey&&(o=((e="")=>e.replace(/^#/,"").trim())(r)),t({[e]:o})};return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(s.TextControl,{label:r.classLabel,value:e[l.classKey]||"",placeholder:a.classPlaceholder,onChange:e=>c(l.classKey,e)}),(0,o.createElement)(s.TextControl,{label:r.dataLabel,value:e[l.dataKey]||"",placeholder:a.dataPlaceholder,help:(0,b.__)("Comma separated pairs: key=value,key2=value2","codeweber-gutenberg-blocks"),onChange:e=>c(l.dataKey,e)}),(0,o.createElement)(s.TextControl,{label:r.idLabel,value:e[l.idKey]||"",placeholder:a.idPlaceholder,onChange:e=>c(l.idKey,e)}))},u=window.wp.apiFetch;var g=l.n(u);const p=JSON.parse('{"apiVersion":2,"name":"codeweber-blocks/html-blocks","version":"0.1.0","title":"Html Blocks","category":"codeweber-gutenberg-blocks","icon":"code","description":"Выберите и отобразите HTML блок из CPT html_blocks","keywords":["html","blocks","cpt"],"supports":{"html":false,"customClassName":true,"anchor":true},"attributes":{"selectedBlockId":{"type":"number","default":0},"blockClass":{"type":"string","default":""},"blockData":{"type":"string","default":""},"blockId":{"type":"string","default":""}},"textdomain":"codeweber-gutenberg-blocks","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}');(0,r.registerBlockType)(p.name,{...p,icon:c,edit:({attributes:e,setAttributes:t,clientId:l})=>{const{selectedBlockId:r,blockClass:a,blockData:c,blockId:u}=e,[p,k]=(0,d.useState)([]),[w,m]=(0,d.useState)(!0),[_,h]=(0,d.useState)(""),[y,v]=(0,d.useState)(!1);(0,d.useEffect)(()=>{(async()=>{m(!0);try{const e=await g()({path:"/wp/v2/html_blocks?per_page=100&status=publish"}),t=[{label:(0,b.__)("-- Выберите блок --","codeweber-gutenberg-blocks"),value:0},...e.map(e=>({label:e.title?.rendered||`#${e.id}`,value:e.id}))];k(t)}catch(e){console.error("Error fetching HTML blocks:",e),k([{label:(0,b.__)("-- Выберите блок --","codeweber-gutenberg-blocks"),value:0}])}finally{m(!1)}})()},[]),(0,d.useEffect)(()=>{r&&0!==r?(async()=>{v(!0);try{const e=await g()({path:`/wp/v2/html_blocks/${r}`}),t=e.content?.rendered||"";h(t)}catch(e){console.error("Error fetching block content:",e),h((0,b.__)("Ошибка загрузки контента","codeweber-gutenberg-blocks"))}finally{v(!1)}})():h("")},[r]);const f=(0,n.useBlockProps)({className:`codeweber-html-blocks ${a||""}`.trim(),...u&&{id:u}});return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(n.InspectorControls,null,(0,o.createElement)(s.PanelBody,{title:(0,b.__)("Настройки HTML блока","codeweber-gutenberg-blocks"),initialOpen:!0},w?(0,o.createElement)("div",{style:{padding:"10px",textAlign:"center"}},(0,o.createElement)(s.Spinner,null),(0,o.createElement)("p",null,(0,b.__)("Загрузка блоков...","codeweber-gutenberg-blocks"))):(0,o.createElement)(s.SelectControl,{label:(0,b.__)("Выберите HTML блок","codeweber-gutenberg-blocks"),value:r||0,options:p,onChange:e=>t({selectedBlockId:parseInt(e)||0}),help:(0,b.__)("Выберите блок из CPT html_blocks для отображения","codeweber-gutenberg-blocks")})),(0,o.createElement)(s.PanelBody,{title:(0,b.__)("Дополнительные настройки","codeweber-gutenberg-blocks")},(0,o.createElement)(i,{attributes:e,setAttributes:t,fieldKeys:{classKey:"blockClass",dataKey:"blockData",idKey:"blockId"},labels:{classLabel:(0,b.__)("CSS класс","codeweber-gutenberg-blocks"),dataLabel:(0,b.__)("Data атрибуты","codeweber-gutenberg-blocks"),idLabel:(0,b.__)("ID элемента","codeweber-gutenberg-blocks")}}))),(0,o.createElement)("div",{...f,...(()=>{const e={};return c&&c.split(",").forEach(t=>{const[l,r]=t.split("=").map(e=>e.trim());l&&r&&(e[`data-${l}`]=r)}),e})()},r&&0!==r?y?(0,o.createElement)("div",{style:{padding:"20px",textAlign:"center"}},(0,o.createElement)(s.Spinner,null),(0,o.createElement)("p",null,(0,b.__)("Загрузка контента...","codeweber-gutenberg-blocks"))):(0,o.createElement)("div",{className:"html-blocks-content",dangerouslySetInnerHTML:{__html:_}}):(0,o.createElement)(s.Placeholder,{icon:"code",label:(0,b.__)("Html Blocks","codeweber-gutenberg-blocks"),instructions:(0,b.__)("Выберите HTML блок из списка в настройках","codeweber-gutenberg-blocks")})))},save:()=>null})}},l={};function r(e){var o=l[e];if(void 0!==o)return o.exports;var a=l[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,l,o,a)=>{if(!l){var c=1/0;for(d=0;d<e.length;d++){for(var[l,o,a]=e[d],n=!0,s=0;s<l.length;s++)(!1&a||c>=a)&&Object.keys(r.O).every(e=>r.O[e](l[s]))?l.splice(s--,1):(n=!1,a<c&&(c=a));if(n){e.splice(d--,1);var b=o();void 0!==b&&(t=b)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[l,o,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var l in t)r.o(t,l)&&!r.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={1663:0,8711:0};r.O.j=t=>0===e[t];var t=(t,l)=>{var o,a,[c,n,s]=l,b=0;if(c.some(t=>0!==e[t])){for(o in n)r.o(n,o)&&(r.m[o]=n[o]);if(s)var d=s(r)}for(t&&t(l);b<c.length;b++)a=c[b],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},l=globalThis.webpackChunkcodeweber_gutenberg_blocks=globalThis.webpackChunkcodeweber_gutenberg_blocks||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var o=r.O(void 0,[8711],()=>r(698));o=r.O(o)})();