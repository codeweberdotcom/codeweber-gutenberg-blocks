# QUICK START · WordPress плагин

## 1. Предусловия
- Node.js ≥ 18, npm или pnpm.
- Глобально установлен `@wordpress/scripts` (опционально, но ускоряет тест).
- Локальная копия WordPress (Laragon). Плагин уже размещён в `wp-content/plugins/codeweber-gutenberg-blocks`.
- Активированная тема `codeweber` (плагин расширяет её блоки).

> ⚠️ **Важно:** Плагин работает **только** с темой `codeweber`. Использование других тем не поддерживается.

## 2. Установка зависимостей
```bash
cd wp-content/plugins/codeweber-gutenberg-blocks
npm install          # либо pnpm install
```

## 3. Типичные скрипты
| Команда | Когда запускать |
|---------|-----------------|
| `npm run start` | Разработка. Горячая перекомпиляция блоков (`wp-scripts start`). |
| `npm run build` | Перед коммитом/релизом — сборка prod-ассембли. |
| `npm run lint:js` | Проверка JS/JSX. Ошибки уровня `error` блокируют merge. |
| `npm run lint:css` | Проверка SCSS/стилей блоков. |
| `npm run format` | Применить Prettier, если правок много. |
| `npm run plugin-zip` | Сборка ZIP, если нужен артефакт для QA/релиза. |

## 4. Минимальный чек-лист перед задачей
1. Обновить ветку: `git pull --rebase`.
2. Проверить активна ли правильная версия плагина в WP (`Плагины → CodeWeber Gutenberg Blocks`).
3. Убедиться, что `generate-json.js` и `generate-pot.js` актуальны (нужны при изменениях локализации).
4. Создать ветку вида `feature/<ticket-id>-<short-name>` или `fix/<...>`.

## 5. Проверка блока в редакторе
1. Запустить `npm run start`.
2. В админке WordPress открыть любую запись/страницу → Gutenberg.
3. Вставить тестируемый блок из группы "CodeWeber".
4. Проверить:
   - панель настроек справа,
   - поведение в списке блоков (List View),
   - соответствие дизайну в редакторе и на фронте.

## 6. После внесения правок
1. `npm run lint:js && npm run lint:css`.
2. `npm run build` — обновлённые ассеты обязаны попасть в коммит.
3. Обновить документацию в `doc/`, если менялись процессы, CLI, чек-листы.
4. Описать тест-кейсы в PR (минимум: редактор, фронт, мобильный просмотр).

## 7. Частые проблемы
- **Блок не появляется в редакторе**: проверить `registerBlockType` и `block.json` (namespace + `category`).
- **Страница ломает стили фронта**: убедиться, что SCSS импортируется через `editor.scss`/`style.scss` и не трогает глобальные селекторы без префикса `.codeweber-`.
- **Локализация не подхватывается**: перезапустить `npm run build`, затем `wp i18n make-json build/blocks`.

> Выполнив чек-лист выше, переходите к детальным фазам из `DEV_WORKFLOW.md`.

